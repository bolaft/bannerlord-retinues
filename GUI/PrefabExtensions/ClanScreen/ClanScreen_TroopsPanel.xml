<?xml version="1.0" encoding="utf-8"?>

<!-- Template macros -->


<Widget 
    IsVisible="@IsTroopsSelected"
    WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent"
    DoNotAcceptEvents="false"
>
	<Children>

        <Widget 
            WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent"
            MarginLeft="600" MarginRight="290"
        >
            <Children>
                <Widget
                    WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent"
                >
                    <Children>
                        <Widget
                            WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent"
                            MarginRight="290"
                        >
                            <Children>
                                <Widget
                                    WidthSizePolicy="Fixed" HeightSizePolicy="StretchToParent"
                                    SuggestedWidth="465" SuggestedHeight="512"
                                    HorizontalAlignment="Left"
                                >
                                    <Children>
                                        <!-- Character tableau -->
                                        <Widget
                                            DataSource="{TroopViewModel}"
                                            WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
                                            SuggestedWidth="550" SuggestedHeight="900"
                                            HorizontalAlignment="Center" VerticalAlignment="Center"
                                        >
                                            <Children>
                                                <CharacterTableauWidget
                                                    WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
                                                    SuggestedWidth="512" SuggestedHeight="1024"
                                                    HorizontalAlignment="Center" VerticalAlignment="Center"
                                                    DoNotUseCustomScale="true"
                                                    BannerCodeText="@BannerCodeText"
                                                    CharStringId="@CharStringId"
                                                    EquipmentCode="@EquipmentCode"
                                                    BodyProperties="@BodyProperties"
                                                    IsFemale="@IsFemale"
                                                    MountCreationKey="@MountCreationKey"
                                                    Race="@Race"
                                                    StanceIndex="@StanceIndex"
                                                    ArmorColor1="@ArmorColor1"
                                                    ArmorColor2="@ArmorColor2"
                                                />
                                            </Children>
                                        </Widget>


                                        <!-- Remove troop button -->
                                        <ButtonWidget
                                            IsVisible="@CanRemoveTroop"
                                            DoNotPassEventsToChildren="true"
                                            WidthSizePolicy="Fixed"
                                            HeightSizePolicy="Fixed"
                                            SuggestedWidth="!CancelButton.Width"
                                            SuggestedHeight="!CancelButton.Height"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Top"
                                            Brush="Popup.Delete.Button"
                                            Command.Click="ExecuteRemoveTroop"
                                        >
                                            <Children>
                                                <TextWidget
                                                    WidthSizePolicy="CoverChildren"
                                                    HeightSizePolicy="CoverChildren"
                                                    Brush="Popup.Button.Text"
                                                    VerticalAlignment="Center"
                                                    HorizontalAlignment="Center"
                                                    Text="Remove"
                                                />
                                            </Children>
                                        </ButtonWidget>

                                        <!-- Edit equipment button -->
                                        <ButtonWidget
                                            IsVisible="@IsDefaultMode"
                                            DoNotPassEventsToChildren="true"
                                            WidthSizePolicy="Fixed"
                                            HeightSizePolicy="Fixed"
                                            SuggestedWidth="!CancelButton.Width"
                                            SuggestedHeight="!CancelButton.Height"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Bottom"
                                            Brush="Popup.Done.Button"
                                            Command.Click="ExecuteSwitchToEquipment"
                                        >
                                            <Children>
                                                <TextWidget
                                                    WidthSizePolicy="CoverChildren"
                                                    HeightSizePolicy="CoverChildren"
                                                    Brush="Popup.Button.Text"
                                                    VerticalAlignment="Center"
                                                    HorizontalAlignment="Center"
                                                    Text="Edit Equipment"
                                                />
                                            </Children>
                                        </ButtonWidget>
                                    </Children>
                                </Widget>
                            </Children>
                        </Widget>
                        <Widget
                            VisualDefinition="RightPanel"
                            WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent"
                            PositionXOffset="800"
                            MarginLeft="340"
                        >
                            <Children>
                                <!-- Troop editor -->
                                <!-- Title header macro --><!-- Base editor macro --><!-- Editors -->
                                <ListPanel
                                    IsVisible="@IsDefaultMode"
                                    WidthSizePolicy="StretchToParent"
                                    HeightSizePolicy="CoverChildren"
                                    MarginLeft="20"
                                    MarginRight="20"
                                    StackLayout.LayoutMethod="VerticalBottomToTop"
                                >
                                    <Children>
                                        <ListPanel
                                            DataSource="{TroopEditor}"
                                            WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren"
                                            StackLayout.LayoutMethod="VerticalBottomToTop"
                                        >
                                            <Children>
                                                <!-- Name header -->
                                                <TextWidget
                                                    WidthSizePolicy="CoverChildren"
                                                    HeightSizePolicy="CoverChildren"
                                                    HorizontalAlignment="Center"
                                                    Text="Name"
                                                    Brush="Kingdom.TitleSmall.Text"
                                                    MarginTop="15"
                                                    MarginBottom="10"
                                                />
                                        
                                                <!-- Name row -->
                                                <ListPanel
                                                    WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren"
                                                    HorizontalAlignment="Center"
                                                    MarginBottom="15"
                                                    StackLayout.LayoutMethod="HorizontalLeftToRight"
                                                    UpdateChildrenStates="true"
                                                >
                                                    <Children>
                                                        <TextWidget
                                                            WidthSizePolicy="CoverChildren"
                                                            HeightSizePolicy="CoverChildren"
                                                            MarginRight="8"
                                                            Brush="Clan.RightPanel.Name.Text"
                                                            Text="@Name"
                                                            ClipContents="false"
                                                        />
                                                        <ButtonWidget
                                                            DoNotPassEventsToChildren="true"
                                                            WidthSizePolicy="CoverChildren"
                                                            HeightSizePolicy="CoverChildren"
                                                            MarginLeft="6"
                                                            Command.Click="ExecuteRename"
                                                            UpdateChildrenStates="true"
                                                        >
                                                            <Children>
                                                                <BrushWidget
                                                                    WidthSizePolicy="Fixed"
                                                                    HeightSizePolicy="Fixed"
                                                                    SuggestedWidth="32"
                                                                    SuggestedHeight="32"
                                                                    Brush="SPClan.NameChange.Icon"
                                                                />
                                                            </Children>
                                                        </ButtonWidget>
                                                    </Children>
                                                </ListPanel>
                                        
                                                <!-- Gender header -->
                                                <TextWidget
                                                    WidthSizePolicy="CoverChildren"
                                                    HeightSizePolicy="CoverChildren"
                                                    HorizontalAlignment="Center"
                                                    Text="Gender"
                                                    Brush="Kingdom.TitleSmall.Text"
                                                    MarginTop="15"
                                                    MarginBottom="10"
                                                />
                                        
                                                <!-- Gender row -->
                                                <ListPanel
                                                    WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren"
                                                    HorizontalAlignment="Center"
                                                    MarginBottom="15"
                                                    StackLayout.LayoutMethod="HorizontalLeftToRight"
                                                    UpdateChildrenStates="true"
                                                >
                                                    <Children>
                                                        <TextWidget
                                                            WidthSizePolicy="CoverChildren"
                                                            HeightSizePolicy="CoverChildren"
                                                            MarginRight="8"
                                                            Brush="Clan.RightPanel.Name.Text"
                                                            Text="@Gender"
                                                            ClipContents="false"
                                                        />
                                                        <ButtonWidget
                                                            DoNotPassEventsToChildren="true"
                                                            WidthSizePolicy="CoverChildren"
                                                            HeightSizePolicy="CoverChildren"
                                                            MarginLeft="6"
                                                            Command.Click="ExecuteChangeGender"
                                                            UpdateChildrenStates="true"
                                                        >
                                                            <Children>
                                                                <BrushWidget
                                                                    WidthSizePolicy="Fixed"
                                                                    HeightSizePolicy="Fixed"
                                                                    SuggestedWidth="32"
                                                                    SuggestedHeight="32"
                                                                    Brush="SPClan.NameChange.Icon"
                                                                />
                                                            </Children>
                                                        </ButtonWidget>
                                                    </Children>
                                                </ListPanel>
                                        
                                                <!-- Skills header -->
                                                <TextWidget
                                                    WidthSizePolicy="CoverChildren"
                                                    HeightSizePolicy="CoverChildren"
                                                    HorizontalAlignment="Center"
                                                    Text="Skills"
                                                    Brush="Kingdom.TitleSmall.Text"
                                                    MarginTop="15"
                                                    MarginBottom="10"
                                                />
                                        
                                                <!-- Skills points -->
                                                <ListPanel
                                                    WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren"
                                                    HorizontalAlignment="Center"
                                                    StackLayout.LayoutMethod="HorizontalLeftToRight"
                                                    UpdateChildrenStates="true"
                                                    MarginBottom="15"
                                                >
                                                    <Children>
                                                        <TextWidget
                                                            IntText="@SkillPointsUsed" Brush="Clan.RightPanel.Name.Text"
                                                            WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren"
                                                            ClipContents="false"
                                                            MarginRight="8"
                                                        />
                                                        <TextWidget
                                                            Text="/" Brush="Clan.RightPanel.Name.Text"
                                                            WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren"
                                                            ClipContents="false"
                                                            MarginRight="8"
                                                        />
                                                        <TextWidget
                                                            IntText="@SkillPoints" Brush="Clan.RightPanel.Name.Text"
                                                            WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren"
                                                            ClipContents="false" 
                                                            MarginRight="8"
                                                        />
                                                    </Children>
                                                </ListPanel>
                                        
                                                <!-- Skills grid -->
                                                <ListPanel
                                                    WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren"
                                                    HorizontalAlignment="Center"
                                                    StackLayout.LayoutMethod="VerticalBottomToTop"
                                                    UpdateChildrenStates="true"
                                                >
                                                    <Children>
                                                        <ListPanel
                                                            DataSource="{SkillsRow1}"
                                                            HorizontalAlignment="Center"
                                                            WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren"
                                                            StackLayout.LayoutMethod="HorizontalLeftToRight"
                                                            MarginBottom="5" UpdateChildrenStates="true"
                                                        >
                                                        <ItemTemplate>
                                                            
                                                            <ListPanel
                                                                WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
                                                                SuggestedWidth="80" SuggestedHeight="110"
                                                                StackLayout.LayoutMethod="VerticalBottomToTop"
                                                                HorizontalAlignment="Center"
                                                                MarginRight="20" MarginLeft="20" MarginBottom="20"
                                                            >
                                                                <Children>
                                                                    <SkillIconVisualWidget
                                                                        SkillId="@StringId"
                                                                        WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
                                                                        SuggestedWidth="80" SuggestedHeight="80"
                                                                        DoNotPassEventsToChildren="false"
                                                                        MarginBottom="6"
                                                                    />
                                                                    <ListPanel
                                                                        WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren"
                                                                        StackLayout.LayoutMethod="HorizontalLeftToRight"
                                                                        HorizontalAlignment="Center"
                                                                        UpdateChildrenStates="true"
                                                                    >
                                                                        <Children>
                                                                            <Widget
                                                                                WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
                                                                                SuggestedWidth="24" SuggestedHeight="24"
                                                                            >
                                                                                <Children>
                                                                                    <ButtonWidget
                                                                                        IsVisible="@CanDecrement"
                                                                                        WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
                                                                                        SuggestedWidth="24" SuggestedHeight="24"
                                                                                        Brush="ButtonRightBigArrowBrush1"
                                                                                        DoNotPassEventsToChildren="true"
                                                                                        UpdateChildrenStates="true"
                                                                                        Command.Click="ExecuteDecrement"
                                                                                    />
                                                                                </Children>
                                                                            </Widget>
                                                                            <TextWidget
                                                                                IntText="@Value"
                                                                                WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
                                                                                SuggestedWidth="32" SuggestedHeight="24"
                                                                                Brush="Encyclopedia.Skill.Text" Brush.FontSize="24" Brush.FontColor="#F4E1C4FF"
                                                                                HorizontalAlignment="Center"
                                                                            />
                                                                            <Widget
                                                                                WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
                                                                                SuggestedWidth="24" SuggestedHeight="24"
                                                                            >
                                                                                <Children>
                                                                                    <ButtonWidget
                                                                                        IsVisible="@CanIncrement"
                                                                                        WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
                                                                                        SuggestedWidth="24" SuggestedHeight="24"
                                                                                        Brush="ButtonLeftBigArrowBrush1"
                                                                                        DoNotPassEventsToChildren="true"
                                                                                        UpdateChildrenStates="true"
                                                                                        Command.Click="ExecuteIncrement"
                                                                                    />
                                                                                </Children>
                                                                            </Widget>
                                                                        </Children>
                                                                    </ListPanel>
                                                                </Children>
                                                            </ListPanel>
                                                        </ItemTemplate>
                                                        </ListPanel>
                                                        <ListPanel
                                                            DataSource="{SkillsRow2}"
                                                            HorizontalAlignment="Center"
                                                            WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren"
                                                            StackLayout.LayoutMethod="HorizontalLeftToRight"
                                                            MarginBottom="5" UpdateChildrenStates="true"
                                                        >
                                                        <ItemTemplate>
                                                            
                                                            <ListPanel
                                                                WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
                                                                SuggestedWidth="80" SuggestedHeight="110"
                                                                StackLayout.LayoutMethod="VerticalBottomToTop"
                                                                HorizontalAlignment="Center"
                                                                MarginRight="20" MarginLeft="20" MarginBottom="20"
                                                            >
                                                                <Children>
                                                                    <SkillIconVisualWidget
                                                                        SkillId="@StringId"
                                                                        WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
                                                                        SuggestedWidth="80" SuggestedHeight="80"
                                                                        DoNotPassEventsToChildren="false"
                                                                        MarginBottom="6"
                                                                    />
                                                                    <ListPanel
                                                                        WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren"
                                                                        StackLayout.LayoutMethod="HorizontalLeftToRight"
                                                                        HorizontalAlignment="Center"
                                                                        UpdateChildrenStates="true"
                                                                    >
                                                                        <Children>
                                                                            <Widget
                                                                                WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
                                                                                SuggestedWidth="24" SuggestedHeight="24"
                                                                            >
                                                                                <Children>
                                                                                    <ButtonWidget
                                                                                        IsVisible="@CanDecrement"
                                                                                        WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
                                                                                        SuggestedWidth="24" SuggestedHeight="24"
                                                                                        Brush="ButtonRightBigArrowBrush1"
                                                                                        DoNotPassEventsToChildren="true"
                                                                                        UpdateChildrenStates="true"
                                                                                        Command.Click="ExecuteDecrement"
                                                                                    />
                                                                                </Children>
                                                                            </Widget>
                                                                            <TextWidget
                                                                                IntText="@Value"
                                                                                WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
                                                                                SuggestedWidth="32" SuggestedHeight="24"
                                                                                Brush="Encyclopedia.Skill.Text" Brush.FontSize="24" Brush.FontColor="#F4E1C4FF"
                                                                                HorizontalAlignment="Center"
                                                                            />
                                                                            <Widget
                                                                                WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
                                                                                SuggestedWidth="24" SuggestedHeight="24"
                                                                            >
                                                                                <Children>
                                                                                    <ButtonWidget
                                                                                        IsVisible="@CanIncrement"
                                                                                        WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
                                                                                        SuggestedWidth="24" SuggestedHeight="24"
                                                                                        Brush="ButtonLeftBigArrowBrush1"
                                                                                        DoNotPassEventsToChildren="true"
                                                                                        UpdateChildrenStates="true"
                                                                                        Command.Click="ExecuteIncrement"
                                                                                    />
                                                                                </Children>
                                                                            </Widget>
                                                                        </Children>
                                                                    </ListPanel>
                                                                </Children>
                                                            </ListPanel>
                                                        </ItemTemplate>
                                                        </ListPanel>
                                                    </Children>
                                                </ListPanel>
                                        
                                                <!-- Upgrades header -->
                                                <TextWidget
                                                    WidthSizePolicy="CoverChildren"
                                                    HeightSizePolicy="CoverChildren"
                                                    HorizontalAlignment="Center"
                                                    Text="Upgrades"
                                                    Brush="Kingdom.TitleSmall.Text"
                                                    MarginTop="15"
                                                    MarginBottom="10"
                                                />
                                        
                                                <!-- Upgrades list -->
                                                <ListPanel
                                                    DataSource="{UpgradeTargets}"
                                                    WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren"
                                                    HorizontalAlignment="Center"
                                                    StackLayout.LayoutMethod="VerticalBottomToTop"
                                                >
                                                    <ItemTemplate>
                                                        <TextWidget
                                                            WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren"
                                                            HorizontalAlignment="Center"
                                                            ClipContents="false" 
                                                            MarginBottom="8"
                                                            Text="@Name" Brush="Clan.Tuple.Name.Text"
                                                        />
                                                    </ItemTemplate>
                                                </ListPanel>
                                        
                                                <!-- Add upgrade button -->
                                                <ButtonWidget
                                                    IsVisible="@CanAddUpgradeTarget"
                                                    DoNotPassEventsToChildren="true"
                                                    WidthSizePolicy="Fixed"
                                                    HeightSizePolicy="Fixed"
                                                    SuggestedWidth="!CancelButton.Width"
                                                    SuggestedHeight="!CancelButton.Height"
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Bottom"
                                                    Brush="ButtonBrush1"
                                                    Command.Click="ExecuteAddUpgradeTarget"
                                                >
                                                    <Children>
                                                        <TextWidget
                                                            WidthSizePolicy="CoverChildren"
                                                            HeightSizePolicy="CoverChildren"
                                                            Brush="Popup.Button.Text"
                                                            VerticalAlignment="Center"
                                                            HorizontalAlignment="Center"
                                                            Text="Add Upgrade"
                                                        />
                                                    </Children>
                                                </ButtonWidget>
                                            
                                            </Children>
                                        </ListPanel>
                                    </Children>
                                </ListPanel>
                                <ListPanel
                                    IsVisible="@IsEquipmentMode"
                                    WidthSizePolicy="StretchToParent"
                                    HeightSizePolicy="CoverChildren"
                                    MarginLeft="20"
                                    MarginRight="20"
                                    StackLayout.LayoutMethod="VerticalBottomToTop"
                                >
                                    <Children>
                                        <ListPanel
                                            DataSource="{EquipmentEditor}"
                                            WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren"
                                            StackLayout.LayoutMethod="VerticalBottomToTop"
                                        >
                                            <Children>
                                                <!-- Header -->
                                                <TextWidget
                                                    WidthSizePolicy="CoverChildren"
                                                    HeightSizePolicy="CoverChildren"
                                                    HorizontalAlignment="Center"
                                                    Text="Equipment"
                                                    Brush="Kingdom.TitleSmall.Text"
                                                    MarginTop="15"
                                                    MarginBottom="10"
                                                />
                                            </Children>
                                        </ListPanel>
                                        
                                        <ListPanel
                                            StackLayout.LayoutMethod="HorizontalLeftToRight"
                                            WidthSizePolicy="CoverChildren" HeightSizePolicy="StretchToParent"
                                            HorizontalAlignment="Center"
                                            MarginBottom="15"
                                            UpdateChildrenStates="true"
                                        >
                                            <Children>
                                                <!-- Cancel button -->
                                                <ButtonWidget
                                                    IsVisible="true"
                                                    DoNotPassEventsToChildren="true"
                                                    WidthSizePolicy="Fixed"
                                                    HeightSizePolicy="Fixed"
                                                    SuggestedWidth="!CancelButton.Width"
                                                    SuggestedHeight="!CancelButton.Height"
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Bottom"
                                                    Brush="ButtonBrush3"
                                                    Command.Click="ExecuteSwitchToDefault"
                                                >
                                                    <Children>
                                                        <TextWidget
                                                            WidthSizePolicy="CoverChildren"
                                                            HeightSizePolicy="CoverChildren"
                                                            Brush="Popup.Button.Text"
                                                            VerticalAlignment="Center"
                                                            HorizontalAlignment="Center"
                                                            Text="Cancel"
                                                        />
                                                    </Children>
                                                </ButtonWidget>
                                                <!-- Confirm button -->
                                                <ButtonWidget
                                                    IsVisible="true"
                                                    DoNotPassEventsToChildren="true"
                                                    WidthSizePolicy="Fixed"
                                                    HeightSizePolicy="Fixed"
                                                    SuggestedWidth="!CancelButton.Width"
                                                    SuggestedHeight="!CancelButton.Height"
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Bottom"
                                                    Brush="ButtonBrush1"
                                                    Command.Click="ExecuteSwitchToDefault"
                                                >
                                                    <Children>
                                                        <TextWidget
                                                            WidthSizePolicy="CoverChildren"
                                                            HeightSizePolicy="CoverChildren"
                                                            Brush="Popup.Button.Text"
                                                            VerticalAlignment="Center"
                                                            HorizontalAlignment="Center"
                                                            Text="Confirm"
                                                        />
                                                    </Children>
                                                </ButtonWidget>
                                            </Children>
                                        </ListPanel>
                                    </Children>
                                </ListPanel>

                            </Children>
                        </Widget>
                    </Children>
                </Widget>
            </Children>
        </Widget>

        <!-- Scrollable list -->
        <BrushListPanel
            IsVisible="@IsDefaultMode"
            WidthSizePolicy="CoverChildren"
            HeightSizePolicy="StretchToParent"
            VerticalAlignment="Bottom"
            MarginTop="6"
            MarginBottom="9"
            MarginLeft="27"
            Brush="Frame1Brush"
            StackLayout.LayoutMethod="VerticalBottomToTop"
        >
            <Children>
                <NavigationScopeTargeter
                    ScopeID="SortButtonsScope" ScopeParent="..\SortButtons" ScopeMovements="Horizontal"
                />
                
                <ListPanel
                    Id="SortButtons"
                    WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren"
                    RenderLate="true"
                >
                    <Children>
                        <SortButtonWidget
                            DoNotPassEventsToChildren="true"
                            WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
                            SuggestedWidth="588" SuggestedHeight="!Clan.Members.Sort.1.Height"
                            Brush="Clan.Members.Sort.1"
                            SortVisualWidget="TextWidget\NameSortVisualWidget"
                            UpdateChildrenStates="true" GamepadNavigationIndex="0"
                        >
                            <Children>
                                <TextWidget
                                    Id="TextWidget"
                                    WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren"
                                    HorizontalAlignment="Center" VerticalAlignment="Center"
                                    Brush="Clan.LeftPanel.Header.Text"
                                    ClipContents="false"
                                    Text=""
                                >
                                    <Children>
                                        <BrushWidget
                                            Id="NameSortVisualWidget"
                                            WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
                                            SuggestedWidth="20" SuggestedHeight="20"
                                            HorizontalAlignment="Right" VerticalAlignment="Center"
                                            PositionXOffset="20"
                                            Brush="ArmyManagement.Sort.ArrowBrush"
                                        />
                                    </Children>
                                </TextWidget>
                            </Children>
                        </SortButtonWidget>
                
                        <Widget 
                            WidthSizePolicy="Fixed" 
                            HeightSizePolicy="Fixed" 
                            SuggestedWidth="!Scroll.Header.Width" 
                            SuggestedHeight="!Scroll.Header.Height" 
                            Sprite="StdAssets\scroll_header" 
                            ExtendRight="3" ExtendTop="6" ExtendLeft="3" ExtendBottom="4" 
                            HorizontalAlignment="Right"/>
                    </Children>
                </ListPanel>
                
                <ListPanel 
                    WidthSizePolicy="CoverChildren" 
                    HeightSizePolicy="StretchToParent"
                >
                    <Children>
                        <ScrollablePanel 
                            DataSource="{TroopList}"
                            Id="CCT_ListTroopsScrollablePanel" 
                            WidthSizePolicy="CoverChildren" 
                            MinWidth="!Clan.Management.Collapser.Width" 
                            HeightSizePolicy="StretchToParent" 
                            MarginLeft="3" MarginBottom="3" 
                            AutoHideScrollBars="true" 
                            ClipRect="CCT_ListTroopsRect" 
                            InnerPanel="CCT_ListTroopsRect\CCT_ListTroopsListPanel" 
                            MouseScrollAxis="Vertical" 
                            VerticalScrollbar="..\CCT_ListTroopsScrollbar\Scrollbar">
                            <Children>
                                <NavigationScopeTargeter 
                                    ScopeID="CCT_TroopsScope" 
                                    ScopeParent=".\CCT_ListTroopsRect" 
                                    ScopeMovements="Vertical" 
                                    IsDefaultNavigationScope="true" 
                                    DoNotAutoNavigateAfterSort="true"/>
                
                                <Widget 
                                    Id="CCT_ListTroopsRect" 
                                    WidthSizePolicy="CoverChildren" 
                                    HeightSizePolicy="StretchToParent" 
                                    ClipContents="true">
                                    <Children>
                
                                        <NavigatableListPanel 
                                            Id="CCT_ListTroopsListPanel" 
                                            WidthSizePolicy="CoverChildren" 
                                            HeightSizePolicy="CoverChildren" 
                                            StackLayout.LayoutMethod="VerticalBottomToTop" 
                                            MinIndex="0" StepSize="1000">
                                            <Children>
                                        
                                                <NavigationAutoScrollWidget 
                                                    TrackedWidget=".\CCT_EliteHeader"/>
                                                
                                                <ScrollablePanelFixedHeaderWidget 
                                                    Id="CCT_EliteHeader" 
                                                    FixedHeader="..\..\..\CCT_EliteToggle" 
                                                    WidthSizePolicy="Fixed" 
                                                    HeightSizePolicy="Fixed" 
                                                    SuggestedWidth="!Clan.Management.Collapser.Width" 
                                                    HeaderHeight="!Clan.Management.Collapser.Height" 
                                                    AdditionalBottomOffset="!Clan.Members.Sort.1.Height"/>
                                                
                                                <NavigatableListPanel 
                                                    Id="CCT_EliteList" 
                                                    DataSource="{EliteTroops}" 
                                                    WidthSizePolicy="CoverChildren" 
                                                    HeightSizePolicy="CoverChildren" 
                                                    HorizontalAlignment="Right" 
                                                    StackLayout.LayoutMethod="VerticalBottomToTop" 
                                                    UseSelfIndexForMinimum="true">
                                                    <ItemTemplate>
                                                        <ButtonWidget 
                                                            DoNotPassEventsToChildren="true"
                                                            WidthSizePolicy="Fixed" 
                                                            HeightSizePolicy="Fixed" 
                                                            SuggestedHeight="68" 
                                                            SuggestedWidth="!Clan.Management.Collapser.Width" 
                                                            Brush="Clan.Management.LeftTuple" 
                                                            IsSelected="@IsSelected" 
                                                            Command.Click="ExecuteSelect" 
                                                            UpdateChildrenStates="true">
                                                            <Children>
                                                                <ListPanel 
                                                                    WidthSizePolicy="StretchToParent" 
                                                                    HeightSizePolicy="StretchToParent" 
                                                                    MarginLeft="24" MarginRight="24" 
                                                                    StackLayout.LayoutMethod="HorizontalLeftToRight">
                                                                    <Children>
                                                                        <TextWidget 
                                                                            WidthSizePolicy="StretchToParent" 
                                                                            HeightSizePolicy="CoverChildren" 
                                                                            VerticalAlignment="Center" 
                                                                            Brush="Clan.Tuple.Name.Text" 
                                                                            ClipContents="false" 
                                                                            Text="@DisplayName"/>
                                                                        <TextWidget 
                                                                            WidthSizePolicy="CoverChildren" 
                                                                            HeightSizePolicy="CoverChildren" 
                                                                            VerticalAlignment="Center" 
                                                                            Brush="Clan.Tuple.Name.Text" 
                                                                            HorizontalAlignment="Right" 
                                                                            Text="@TierText"/>
                                                                    </Children>
                                                                </ListPanel>
                                                            </Children>
                                                        </ButtonWidget>
                                                    </ItemTemplate>
                                                </NavigatableListPanel>
                                                <NavigationAutoScrollWidget 
                                                    TrackedWidget=".\CCT_RegularHeader"/>
                                                
                                                <ScrollablePanelFixedHeaderWidget 
                                                    Id="CCT_RegularHeader" 
                                                    FixedHeader="..\..\..\CCT_RegularToggle" 
                                                    WidthSizePolicy="Fixed" 
                                                    HeightSizePolicy="Fixed" 
                                                    SuggestedWidth="!Clan.Management.Collapser.Width" 
                                                    HeaderHeight="!Clan.Management.Collapser.Height" 
                                                    AdditionalBottomOffset="!Clan.Members.Sort.1.Height"/>
                                                
                                                <NavigatableListPanel 
                                                    Id="CCT_RegularList" 
                                                    DataSource="{BasicTroops}" 
                                                    WidthSizePolicy="CoverChildren" 
                                                    HeightSizePolicy="CoverChildren" 
                                                    HorizontalAlignment="Right" 
                                                    StackLayout.LayoutMethod="VerticalBottomToTop" 
                                                    UseSelfIndexForMinimum="true">
                                                    <ItemTemplate>
                                                        <ButtonWidget 
                                                            DoNotPassEventsToChildren="true"
                                                            WidthSizePolicy="Fixed" 
                                                            HeightSizePolicy="Fixed" 
                                                            SuggestedHeight="68" 
                                                            SuggestedWidth="!Clan.Management.Collapser.Width" 
                                                            Brush="Clan.Management.LeftTuple" 
                                                            IsSelected="@IsSelected" 
                                                            Command.Click="ExecuteSelect" 
                                                            UpdateChildrenStates="true">
                                                            <Children>
                                                                <ListPanel 
                                                                    WidthSizePolicy="StretchToParent" 
                                                                    HeightSizePolicy="StretchToParent" 
                                                                    MarginLeft="24" MarginRight="24" 
                                                                    StackLayout.LayoutMethod="HorizontalLeftToRight">
                                                                    <Children>
                                                                        <TextWidget 
                                                                            WidthSizePolicy="StretchToParent" 
                                                                            HeightSizePolicy="CoverChildren" 
                                                                            VerticalAlignment="Center" 
                                                                            Brush="Clan.Tuple.Name.Text" 
                                                                            ClipContents="false" 
                                                                            Text="@DisplayName"/>
                                                                        <TextWidget 
                                                                            WidthSizePolicy="CoverChildren" 
                                                                            HeightSizePolicy="CoverChildren" 
                                                                            VerticalAlignment="Center" 
                                                                            Brush="Clan.Tuple.Name.Text" 
                                                                            HorizontalAlignment="Right" 
                                                                            Text="@TierText"/>
                                                                    </Children>
                                                                </ListPanel>
                                                            </Children>
                                                        </ButtonWidget>
                                                    </ItemTemplate>
                                                </NavigatableListPanel>
                                        
                                            </Children>
                                        </NavigatableListPanel>
                
                                    </Children>
                                </Widget>
                
                                <PartyHeaderToggleWidget
                                    Id="CCT_RegularToggle"
                                    DoNotPassEventsToChildren="true"
                                    WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
                                    SuggestedWidth="!Clan.Management.Collapser.Width" SuggestedHeight="!Clan.Management.Collapser.Height"
                                    CollapseIndicator="RegularCollapser\RegularCollapseIndicator"
                                    ListPanel="..\CCT_ListTroopsRect\CCT_ListTroopsListPanel\CCT_RegularList"
                                    HorizontalAlignment="Left" VerticalAlignment="Top"
                                    Brush="Clan.Management.Collapser"
                                    WidgetToClose="..\CCT_ListTroopsRect\CCT_ListTroopsListPanel\CCT_RegularList"
                                >
                                    <Children>
                                        <ListPanel
                                            Id="RegularCollapser"
                                            WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren"
                                            HorizontalAlignment="Center" VerticalAlignment="Center"
                                        >
                                            <Children>
                                                <BrushWidget
                                                    Id="RegularCollapseIndicator"
                                                    WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
                                                    SuggestedWidth="16" SuggestedHeight="16"
                                                    VerticalAlignment="Center"
                                                    PositionYOffset="-2" MarginRight="5"
                                                    Brush="Party.Toggle.ExpandIndicator"
                                                />
                                                <TextWidget
                                                    WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren"
                                                    Brush="Clan.Management.Collapser.Text"
                                                    Text="Regular"
                                                />
                                            </Children>
                                        </ListPanel>
                                    </Children>
                                </PartyHeaderToggleWidget>
                                <PartyHeaderToggleWidget
                                    Id="CCT_EliteToggle"
                                    DoNotPassEventsToChildren="true"
                                    WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
                                    SuggestedWidth="!Clan.Management.Collapser.Width" SuggestedHeight="!Clan.Management.Collapser.Height"
                                    CollapseIndicator="EliteCollapser\EliteCollapseIndicator"
                                    ListPanel="..\CCT_ListTroopsRect\CCT_ListTroopsListPanel\CCT_EliteList"
                                    HorizontalAlignment="Left" VerticalAlignment="Top"
                                    Brush="Clan.Management.Collapser"
                                    WidgetToClose="..\CCT_ListTroopsRect\CCT_ListTroopsListPanel\CCT_EliteList"
                                >
                                    <Children>
                                        <ListPanel
                                            Id="EliteCollapser"
                                            WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren"
                                            HorizontalAlignment="Center" VerticalAlignment="Center"
                                        >
                                            <Children>
                                                <BrushWidget
                                                    Id="EliteCollapseIndicator"
                                                    WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
                                                    SuggestedWidth="16" SuggestedHeight="16"
                                                    VerticalAlignment="Center"
                                                    PositionYOffset="-2" MarginRight="5"
                                                    Brush="Party.Toggle.ExpandIndicator"
                                                />
                                                <TextWidget
                                                    WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren"
                                                    Brush="Clan.Management.Collapser.Text"
                                                    Text="Elite"
                                                />
                                            </Children>
                                        </ListPanel>
                                    </Children>
                                </PartyHeaderToggleWidget>
                
                
                            </Children>
                        </ScrollablePanel>
                
                        <Standard.VerticalScrollbar 
                            Id="CCT_ListTroopsScrollbar" 
                            HeightSizePolicy="StretchToParent" 
                            HorizontalAlignment="Right" 
                            VerticalAlignment="Bottom" 
                            MarginLeft="2" MarginRight="2" MarginBottom="3"
                        />
                    </Children>
                </ListPanel>
            </Children>
        </BrushListPanel>
        <BrushListPanel
            IsVisible="@IsEquipmentMode"
            WidthSizePolicy="CoverChildren"
            HeightSizePolicy="StretchToParent"
            VerticalAlignment="Bottom"
            MarginTop="6"
            MarginBottom="9"
            MarginLeft="27"
            Brush="Frame1Brush"
            StackLayout.LayoutMethod="VerticalBottomToTop"
        >
            <Children>
                <NavigationScopeTargeter
                    ScopeID="SortButtonsScope" ScopeParent="..\SortButtons" ScopeMovements="Horizontal"
                />
                
                <ListPanel
                    Id="SortButtons"
                    WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren"
                    RenderLate="true"
                >
                    <Children>
                        <SortButtonWidget
                            DoNotPassEventsToChildren="true"
                            WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
                            SuggestedWidth="588" SuggestedHeight="!Clan.Members.Sort.1.Height"
                            Brush="Clan.Members.Sort.1"
                            SortVisualWidget="TextWidget\NameSortVisualWidget"
                            UpdateChildrenStates="true" GamepadNavigationIndex="0"
                        >
                            <Children>
                                <TextWidget
                                    Id="TextWidget"
                                    WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren"
                                    HorizontalAlignment="Center" VerticalAlignment="Center"
                                    Brush="Clan.LeftPanel.Header.Text"
                                    ClipContents="false"
                                    Text=""
                                >
                                    <Children>
                                        <BrushWidget
                                            Id="NameSortVisualWidget"
                                            WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
                                            SuggestedWidth="20" SuggestedHeight="20"
                                            HorizontalAlignment="Right" VerticalAlignment="Center"
                                            PositionXOffset="20"
                                            Brush="ArmyManagement.Sort.ArrowBrush"
                                        />
                                    </Children>
                                </TextWidget>
                            </Children>
                        </SortButtonWidget>
                
                        <Widget 
                            WidthSizePolicy="Fixed" 
                            HeightSizePolicy="Fixed" 
                            SuggestedWidth="!Scroll.Header.Width" 
                            SuggestedHeight="!Scroll.Header.Height" 
                            Sprite="StdAssets\scroll_header" 
                            ExtendRight="3" ExtendTop="6" ExtendLeft="3" ExtendBottom="4" 
                            HorizontalAlignment="Right"/>
                    </Children>
                </ListPanel>
                
                <ListPanel 
                    WidthSizePolicy="CoverChildren" 
                    HeightSizePolicy="StretchToParent"
                >
                    <Children>
                        <ScrollablePanel 
                            DataSource="{ItemList}"
                            Id="CCT_ListItemsScrollablePanel" 
                            WidthSizePolicy="CoverChildren" 
                            MinWidth="!Clan.Management.Collapser.Width" 
                            HeightSizePolicy="StretchToParent" 
                            MarginLeft="3" MarginBottom="3" 
                            AutoHideScrollBars="true" 
                            ClipRect="CCT_ListItemsRect" 
                            InnerPanel="CCT_ListItemsRect\CCT_ListItemsListPanel" 
                            MouseScrollAxis="Vertical" 
                            VerticalScrollbar="..\CCT_ListItemsScrollbar\Scrollbar">
                            <Children>
                            
                                <!-- Not implemented -->
                
                            </Children>
                        </ScrollablePanel>
                
                        <Standard.VerticalScrollbar 
                            Id="CCT_ListItemsScrollbar" 
                            HeightSizePolicy="StretchToParent" 
                            HorizontalAlignment="Right" 
                            VerticalAlignment="Bottom" 
                            MarginLeft="2" MarginRight="2" MarginBottom="3"
                        />
                    </Children>
                </ListPanel>
            </Children>
        </BrushListPanel>

    </Children>
</Widget>
