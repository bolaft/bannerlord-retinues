

{% macro chevron(command, brush, enabled) %}

<ButtonWidget
    IsEnabled="{{ enabled }}"
    WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
    HorizontalAlignment="Center" VerticalAlignment="Center"
    SuggestedWidth="24" SuggestedHeight="24"
    Brush="Popup.Button.Text"
    Command.Click="{{ command }}" UpdateChildrenStates="true" DoNotPassEventsToChildren="true">
    <Children>
        <BrushWidget WidthSizePolicy="Fixed"
            HeightSizePolicy="Fixed"
            SuggestedWidth="24" SuggestedHeight="24"
            Brush="{{ brush }}"/>
    </Children>
</ButtonWidget>

{%- endmacro %}

{% macro icon_button(command, brush, enabled, tooltip) %}

<Widget
    WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren"
    HorizontalAlignment="Center" VerticalAlignment="Center">
    <Children>
        <HintWidget
            DataSource="{{ tooltip }}"
            Command.HoverBegin="ExecuteBeginHint" Command.HoverEnd="ExecuteEndHint"/>
        <ButtonWidget
            IsEnabled="{{ enabled }}"
            WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
            HorizontalAlignment="Center" VerticalAlignment="Center"
            SuggestedWidth="36" SuggestedHeight="36"
            Brush="{{ brush }}"
            Command.Click="{{ command }}" UpdateChildrenStates="true" DoNotPassEventsToChildren="true"/>
    </Children>
</Widget>

{%- endmacro %}


{% macro checkbox(binding, size, tooltip, enabled) %}

<Widget
    HorizontalAlignment="Center" VerticalAlignment="Center"
    WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren">
    <Children>
        <HintWidget
            DataSource="{{ tooltip }}"
            Command.HoverBegin="ExecuteBeginHint" Command.HoverEnd="ExecuteEndHint"/>

        <ButtonWidget
            IsVisible="{{ enabled }}"
            IsSelected="{{ binding }}"
            IsEnabled="true"
            DoNotPassEventsToChildren="true"
            WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
            SuggestedWidth="{{ size }}" SuggestedHeight="{{ size }}"
            HorizontalAlignment="Center" VerticalAlignment="Center"
            Brush="SPOptions.Checkbox.Empty.Button"
            ButtonType="Toggle"
            ToggleIndicator="ToggleIndicator"
            UpdateChildrenStates="true">
            <Children>
                <ImageWidget
                    Id="ToggleIndicator"
                    WidthSizePolicy="StretchToParent"
                    HeightSizePolicy="StretchToParent"
                    Brush="SPOptions.Checkbox.Full.Button"
                />
                <HintWidget
                    DataSource="{{ tooltip }}"
                    Command.HoverBegin="ExecuteBeginHint"
                    Command.HoverEnd="ExecuteEndHint"/>
            </Children>
        </ButtonWidget>

        <ButtonWidget
            IsHidden="{{ enabled }}"
            IsSelected="{{ binding }}"
            IsEnabled="false"
            DoNotPassEventsToChildren="true"
            WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
            SuggestedWidth="{{ size }}" SuggestedHeight="{{ size }}"
            HorizontalAlignment="Center" VerticalAlignment="Center"
            Brush="SPOptions.Checkbox.Empty.Button"
            ButtonType="Toggle"
            ToggleIndicator="ToggleIndicator"
            UpdateChildrenStates="true">
            <Children>
                <ImageWidget
                    Id="ToggleIndicator"
                    WidthSizePolicy="StretchToParent"
                    HeightSizePolicy="StretchToParent"
                    Brush="SPOptions.Checkbox.Full.Button"
                />
                <HintWidget
                    DataSource="{{ tooltip }}"
                    Command.HoverBegin="ExecuteBeginHint"
                    Command.HoverEnd="ExecuteEndHint"/>
            </Children>
        </ButtonWidget>
    </Children>
</Widget>

{%- endmacro %}


<ListPanel
    DataSource="{EquipmentControls}"
    IsVisible="@IsVisible"
    WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren"
    StackLayout.LayoutMethod="VerticalBottomToTop"
    HorizontalAlignment="Left" VerticalAlignment="Top">
    <Children>

        {# Show Civilian #}
        <ListPanel
            WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren"
            VerticalAlignment="Top" HorizontalAlignment="Left">
            <Children>

                {# Civilian Icon #}
                {# <SpriteWidget
                    WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
                    SuggestedWidth="30" SuggestedHeight="30"
                    Color="f8eed1ff"
                    Sprite="SPGeneral\MapOverlay\Settlement\icon_militia_big">
                    <Children>
                        <HintWidget
                            DataSource="{CivilianTooltip}"
                            Command.HoverBegin="ExecuteBeginHint" Command.HoverEnd="ExecuteEndHint"/>
                    </Children>
                </SpriteWidget> #}

                {# Show Civilian Checkbox #}
                {# {{ checkbox(
                    binding="@ShowCivilian",
                    size="30",
                    tooltip="{CivilianTooltip}",
                    enabled="@CanToggleShowCivilian"
                )}} #}

            </Children>
        </ListPanel>

    </Children>
</ListPanel>

<ListPanel
    DataSource="{EquipmentControls}"
    IsVisible="@IsVisible"
    WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren"
    StackLayout.LayoutMethod="VerticalBottomToTop"
    HorizontalAlignment="Center" VerticalAlignment="Top">
    <Children>

        <ButtonWidget
            WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
            HorizontalAlignment="Center" VerticalAlignment="Center"
            SuggestedWidth="200" SuggestedHeight="60"
            Brush="ButtonBrush3"
            Command.Click="ExecuteToggleShowCivilian"
            UpdateChildrenStates="true" DoNotPassEventsToChildren="true">
            <Children>
                <TextWidget
                    WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren"
                    Brush="Popup.Button.Text"
                    VerticalAlignment="Center" HorizontalAlignment="Center"
                    Text="@ToggleShowCivilianButtonText"/>
            </Children>
        </ButtonWidget>

        <ListPanel
            IsVisible="@ShowSetActionButtons"
            MarginTop="4"
            WidthSizePolicy="CoverChildren"
            HeightSizePolicy="CoverChildren"
            StackLayout.LayoutMethod="HorizontalLeftToRight"
            HorizontalAlignment="Center">
            <Children>

                {{ icon_button("ExecuteDeleteSet", "Inventory.Tuple.Extension.MinusButton", "@CanDeleteSet", "{CanDeleteSetTooltip}") }}

                {{ chevron("ExecutePrevSet", "ButtonRightBigArrowBrush1", "@CanSelectPrevSet") }}

                <TextWidget
                    Text="@EquipmentLabel"
                    Brush="Clan.Tuple.Name.Text"
                    WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren"
                    MarginLeft="8" MarginRight="8"
                    HorizontalAlignment="Center" VerticalAlignment="Center" />

                {{ chevron("ExecuteNextSet", "ButtonLeftBigArrowBrush1", "@CanSelectNextSet") }}

                {{ icon_button("ExecuteCreateSet", "Inventory.Tuple.Extension.PlusButton", "@CanCreateSet", "{CanCreateSetTooltip}") }}

            </Children>
        </ListPanel>

    </Children>
</ListPanel>
