<!-- ━━━━━━━━━━━━━━━━━━━━━ -->
<!--      Skills Block     -->
<!-- ━━━━━━━━━━━━━━━━━━━━━ -->

<!-- Skills Header -->
{{ text.header(text="@SkillsHeaderText") }}

<!-- Skills Summary -->
<ListPanel
    WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren"
    HorizontalAlignment="Center"
    StackLayout.LayoutMethod="HorizontalLeftToRight"
    UpdateChildrenStates="true">
    <Children>

        <!-- Points Used -->
        {{ text.base(text="@SkillPointsUsed", brush="Clan.RightPanel.Name.Text", is_int="true", margin_right="8") }}

        <!-- Separator -->
        {{ text.base(text="/", brush="Clan.RightPanel.Name.Text", margin_right="8") }}

        <!-- Points Total -->
        {{ text.base(text="@SkillPointsTotal", brush="Clan.RightPanel.Name.Text", is_int="true", margin_right="8") }}
    </Children>
</ListPanel>

<!-- XP, Cap and Tier -->
<ListPanel
    WidthSizePolicy="CoverChildren" HeightSizePolicy="Fixed"
    SuggestedHeight="30"
    HorizontalAlignment="Center"
    StackLayout.LayoutMethod="HorizontalLeftToRight"
    UpdateChildrenStates="true"
    MarginBottom="15">
    <Children>
        <!-- Value Displays -->
        {{ text.small(text="@TroopXpText", is_visible="@TroopXpIsEnabled") }}
        {{ text.small(text=" - ", is_visible="@TroopXpIsEnabled") }}
        {{ text.small(text="@SkillCapText") }}
        {{ text.small(text=" - ", is_visible="@IsRetinue") }}
        {{ text.small(text="@TierText", is_visible="@IsRetinue", margin_right="8") }}

        <!-- Rank Up Button -->
        {{ button.brush(
            command="ExecuteRankUp",
            brush="Inventory.Tuple.Extension.PlusButton",
            height="30", width="30",
            is_visible="@CanRankUp"
        )}}
    </Children>
</ListPanel>

<!-- Training Time -->
<ListPanel
    IsVisible="@TrainingTakesTime"
    WidthSizePolicy="CoverChildren" HeightSizePolicy="Fixed"
    SuggestedHeight="30"
    HorizontalAlignment="Center"
    StackLayout.LayoutMethod="HorizontalLeftToRight"
    UpdateChildrenStates="true"
    MarginBottom="15">
    <Children>
        <!-- Training Time Text -->
        {{ text.base(
            text="@TrainingTimeText",
            brush="InventoryGoldFontBrush",
            font_color="@TrainingTimeTextColor"
        ) }}
        
        <!-- Tooltip Icon -->
        {{ tooltip.icon(hint="{TrainingRequiredHint}", size="20") }}
    </Children>
</ListPanel>

{# Skill Macro #}
{% macro skill() -%}

<ListPanel
    WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
    SuggestedWidth="80" SuggestedHeight="110"
    StackLayout.LayoutMethod="VerticalBottomToTop"
    HorizontalAlignment="Center"
    MarginRight="20" MarginLeft="20" MarginBottom="20">
    <Children>
        <!-- Visual Widget -->
        <SkillIconVisualWidget
            SkillId="@SkillId"
            WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
            SuggestedWidth="80" SuggestedHeight="80"
            DoNotPassEventsToChildren="false"
            MarginBottom="6">
            <Children>
                {{ tooltip.hint(hint="{SkillHint}") }}
            </Children>
        </SkillIconVisualWidget>

        <!-- Controls -->
        <ListPanel
            WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren"
            StackLayout.LayoutMethod="HorizontalLeftToRight"
            HorizontalAlignment="Center"
            UpdateChildrenStates="true">
            <Children>

                <!-- Decrement Skill -->
                {{ button.chevron_l(command="ExecuteDecrement", is_enabled="@CanDecrement") }}

                <!-- Skill Value -->
                {{ text.base(
                    text="@Value",
                    is_int="true",
                    brush="Encyclopedia.Skill.Text",
                    width="32", height="24",
                    font_size="24",
                    font_color="@ValueColor",
                ) }}

                <!-- Increment Skill -->
                {{ button.chevron_r(command="ExecuteIncrement", is_enabled="@CanIncrement") }}

            </Children>
        </ListPanel>
    </Children>
</ListPanel>

{%- endmacro %}

<!-- Skills Grid -->
<ListPanel
    WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren"
    HorizontalAlignment="Center"
    StackLayout.LayoutMethod="VerticalBottomToTop"
    UpdateChildrenStates="true">
    <Children>
        <ListPanel
            DataSource="{SkillsRow1}"
            HorizontalAlignment="Center"
            WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren"
            StackLayout.LayoutMethod="HorizontalLeftToRight"
            MarginBottom="5"
            UpdateChildrenStates="true">
            <ItemTemplate>
                {{ skill() }}
            </ItemTemplate>
        </ListPanel>
        <ListPanel
            DataSource="{SkillsRow2}"
            HorizontalAlignment="Center"
            WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren"
            StackLayout.LayoutMethod="HorizontalLeftToRight"
            UpdateChildrenStates="true">
            <ItemTemplate>
                {{ skill() }}
            </ItemTemplate>
        </ListPanel>
    </Children>
</ListPanel>
